- defaults:
    link:
      glob: true
      create: true
      relink: true
      force: true

- clean:
    ~/:
    ~/.config:
      recursive: true

- shell:
    - [
        'src="config/karabiner/karabiner.json"; dest="$HOME/.config/karabiner/karabiner.json"; if [
        -f "$dest" ] && [ ! -L "$dest" ]; then cp "$dest" "$src" && echo "  karabiner: live →
        dotfiles"; elif [ -f "$src" ]; then mkdir -p "$(dirname "$dest")" && cp "$src" "$dest" &&
        echo "  karabiner: dotfiles → live (bootstrap)"; fi',
        Syncing karabiner config,
      ]

- link:
    # General
    ~/.editorconfig: general/.editorconfig
    ~/.hushlogin: general/.hushlogin
    ~/Brewfile: general/Brewfile
    ~/Brewfile.lock.json: general/Brewfile.lock.json
    ~/.cspell.json: general/.cspell.json
    ~/.cspell/personal-words.txt: general/.cspell/personal-words.txt
    ~/.cspell/misc.txt: general/.cspell/misc.txt
    # Git Config
    ~/.gitattributes: general/git/.gitattributes
    ~/.gitconfig: general/git/.gitconfig
    ~/.gitignore: general/git/.gitignore
    # Ghostty
    ~/.config/ghostty: config/ghostty
    # Kitty
    ~/.config/kitty: config/kitty
    # Karabiner - managed via shell sync (app replaces symlinks)
    # Starship
    ~/.config/starship.toml: config/starship/config.toml
    # ZSH
    ~/.zshenv: config/zsh/.zshenv
    ~/.zshrc: config/zsh/.zshrc
    ~/.config/zsh/.zsh_plugins.txt: config/zsh/.zsh_plugins.txt
    # mise (tool version manager)
    ~/.config/mise: config/mise
    # Fastfetch
    ~/.config/fastfetch: config/fastfetch
    # bat
    ~/.config/bat/config: config/bat/config
    # btop
    ~/.config/btop: config/btop
    # Tmux
    ~/.tmux.conf: config/tmux/tmux.conf
    # Neovim (LazyVim)
    ~/.config/nvim: config/nvim
